{{- $id := .Get "id" | default "" -}}
{{- $numbered := .Get "numbered" | default "true" -}}
{{- $title := .Get "title" | default "Custom" -}}
{{- $style := .Get "style" | default "plain" -}}
{{- if not (in (slice "plain" "defn" "remark") $style) -}}
{{- $style = "plain" -}}
{{- end -}}

<div class="math-env style-{{ $style }}"
    {{ with $id }}id="{{ . }}"{{ end }}
     data-kind="custom"
     data-numbered="{{ $numbered }}"
     data-label="{{ $title }}">
  <span class="math-heading">
  <span class="math-title"
        data-label="{{ $title }}"></span>{{ with .Get "note" }} <span class="math-note">({{ . }})</span>{{ end }}
  </span>
  <span class="math-body">
    {{ .Inner | markdownify }}
  </span>
</div>
