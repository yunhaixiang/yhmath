{{/* layouts/shortcodes/collapsible.html */}}

{{- $title := .Get "title" | default "Hint" -}}
{{- $open  := .Get "open"  | default "false" -}}
{{- $isOpen := or (eq $open true) (eq $open "true") -}}
{{- $uid := printf "yh-hint-%d" .Ordinal -}}

{{- $inner := .Inner | markdownify -}}
{{- /* strip ONE outer <p> so inline start looks clean */ -}}
{{- $inner = $inner | replaceRE `(?s)^\s*<p>(.*)</p>\s*$` `$1` -}}

<div class="yh-hint-row" data-hint-row>
  <span class="yh-hint-head"
        role="button"
        tabindex="0"
        aria-expanded="{{ if $isOpen }}true{{ else }}false{{ end }}"
        aria-controls="{{ $uid }}"
        data-hint-toggle>
    <span class="yh-hint-title">{{ $title }}.</span>
  </span>

  <div id="{{ $uid }}"
       class="yh-hint-body"
       data-hint-body
       style="{{ if $isOpen }}display:block;{{ else }}display:none;{{ end }}">
    {{- $inner | safeHTML -}}
  </div>
</div>
